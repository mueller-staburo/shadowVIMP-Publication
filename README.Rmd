---
output: github_document
bibliography: results/references.bib
always_allow_html: true
---

<!-- README.md is generated from README.Rmd. Please edit that file -->

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>"
)
library(kableExtra)
```

# shadowVIMP - Simulation Study

<!-- badges: start -->
<!-- badges: end -->


This repository contains the code for the simulation study conducted in **"shadowVIMP: Permutation-based multiple testing-controlled variable selection"**. The most important files in this repository are:

1. File `01_sim.R` specifies the data simulation scenarios along with the methods for performing feature selection.
2. File `02_unpack_resuts.R` gathers the results obtained in the first file and computes performance measures for all scenarios.
3. File `03_alzheimer.R` performs feature selection using the shadowVIMP method on the Alzheimer dataset from the `AppliedPredictiveModeling` package.


The remainder of the repository is organized as follows:

* **functions/** contains all custom R functions used in this study:
    + `data_simulation_functions.R` implements the various data-generation designs used (see table below).
    + `vim_perm_sim.R`, `add_test_results.R` and `vim_perm_sim_wrapper.R` form the implementation of the proposed shadowVIMP method as used in this study. Since then, the implementation was ported into a publicly available R-package on CRAN: `shadowVIMP` package [@shadowVIMP], which we recommend using.
    + All the other scripts in this folder contain technical helper functions.
* **results/** stores every output presented in the paper:
    + **figures/** stores graphics included in the manuscript.
    + **intermediate_results/** has subfolders named by simulation scenario that contain per-method RDS result files. Two summary `.xlsx` files aggregate performance metrics for the proposed and comparison methods. The file `alzheimer.rds` contains results from `03_alzheimer.R`.
    + **logs/** contains text files capturing session information from `01_sim.R`, `02_unpack_resuts.R` and `03_alzheimer.R`.
    + **tables/** stores tables used in the publication.
    + **`reference.bib`** - BibTeX entries for all papers cited in this repository.

Below is a table summarizing the data simulation designs and feature selection methods that are used in the `01_sim.R` file.

```{r table_simulations_methods, echo=FALSE}
methods_set1 <- c("shadowVIMP without pre-selection", 
             "shadowVIMP with pre-selection", 
             "Boruta algorithm with 10.000 trees [@kursa2010boruta, @kursa2010feature]", 
             "Boruta algorithm with 500 trees [@kursa2010boruta, @kursa2010feature]", 
             "Method from @janitza2018computationally with 10.000 trees")

methods_set2 <- c("shadowVIMP without pre-selection", 
             "shadowVIMP with pre-selection", 
             "Boruta algorithm with 10.000 trees [@kursa2010boruta, @kursa2010feature]", 
             "Boruta algorithm with 500 trees [@kursa2010boruta, @kursa2010feature]",
             "Method from @hapfelmeier2023efficient with 10.000 trees, implemented in @hapfelmeier2023package",
             "Method from @hapfelmeier2023efficient with 500 trees, implemented in @hapfelmeier2023package"
             )

table_content <- data.frame(
  data_sim = c(rep("@degenhardt2019evaluation with a group size of 50, 100 observations, and a total of 5.000 covariates.", 5),
               rep("@friedman1991multivariate with 100 observations", 6),
               rep("@degenhardt2019evaluation with a group size of 10, 100 observations, and a total of 5.000 covariates.", 5),
               rep("@strobl2007bias with 100 observations", 6),
               rep("The null case of the design @nicodemus2010behaviour", 6)
               ),
  method = c(methods_set1, methods_set2, methods_set1, methods_set2, methods_set2),
  name = paste0("evaluatesetting", 1:28)
)


names(table_content) <- c("Data Simulation Design", "Method", "Setting Name in `01_sim.R`")

kable(table_content, "html", escape = FALSE, align = "c") %>%
  collapse_rows(columns = 1, valign = "middle") %>% 
  column_spec(1, width = "20em") %>%  # Adjust width of the first column
  kable_styling(full_width = FALSE)

```


Computational specifications: 

Program and Platform:

* Program: R, versions 4.2.2 and 4.2.1.
* The raw results of the simulation study were obtained on a Linux cluster, and the evaluation of the raw
results to produce the final results as well as the conduction of the real data analyses was performed on
Windows.
* Below is the output of the R command sessionInfo() on the Linux machine and on the Windows
machine. The output specifies which R packages and versions of those packages were used to generate
the raw results and to evaluate them.


sessionInfo() of the Linux machine (`01_sim.R`):
```{r, echo=FALSE}
cat("```r\n")
cat(readLines("results/logs/sessionInfo_of_01_sim.txt"), sep = "\n")
cat("\n```")
```


sessionInfo() of the Windows machine (`02_unpack_results.R`):
```{r, echo=FALSE}
cat("```r\n")
cat(readLines("results/logs/sessionInfo_02_unpack_results.txt"), sep = "\n")
cat("\n```")
```



sessionInfo() of the Windows machine (`03_alzheimer.R`):
```{r, echo=FALSE}
cat("```r\n")
cat(readLines("results/logs/sessionInfo_03_alzheimer.txt"), sep = "\n")
cat("\n```")
```